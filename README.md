# 라즈베리 파이 릴레이 웹 제어 시스템

라즈베리 파이에서 2채널 릴레이 모듈을 웹 브라우저를 통해 제어할 수 있는 시스템입니다.

## 기능

- 🌐 웹 브라우저를 통한 릴레이 제어
- 🔄 실시간 릴레이 상태 표시
- 🎛️ 개별 릴레이 제어 (열기/닫기/토글)
- 🎚️ 전체 릴레이 제어 (모두 열기/닫기)
- 📱 반응형 웹 디자인 (모바일 지원)

## 하드웨어 연결

### 릴레이 모듈 연결

- 릴레이 1: GPIO 27 (BCM 모드)
- 릴레이 2: GPIO 17 (BCM 모드)
- VCC: 5V 또는 3.3V
- GND: Ground

### 릴레이 모듈 사양

- 저전압 트리거 릴레이 모듈 사용
- LOW 신호에서 릴레이 활성화
- HIGH 신호에서 릴레이 비활성화

## 설치 및 실행

### 1. 필요한 패키지 설치

```bash
pip3 install -r requirements.txt
```

### 2. 웹 서버 실행

```bash
python3 relay_web_server.py
```

### 3. 웹 브라우저에서 접속

- 로컬 접속: `http://localhost:5000`
- 네트워크 접속: `http://라즈베리파이IP:5000`

## API 엔드포인트

### 릴레이 상태 조회

```
GET /api/relay/status
```

### 릴레이 토글

```
POST /api/relay/{relay_num}/toggle
```

### 릴레이 상태 설정

```
POST /api/relay/{relay_num}/set
Content-Type: application/json
Body: {"state": true/false}
```

### 모든 릴레이 제어

```
POST /api/relay/all/on   # 모두 열기
POST /api/relay/all/off  # 모두 닫기
```

## 웹 인터페이스 기능

### 개별 릴레이 제어

- **열기 버튼**: 해당 릴레이를 활성화
- **닫기 버튼**: 해당 릴레이를 비활성화
- **토글 버튼**: 현재 상태를 반대로 변경

### 전체 제어

- **모두 열기**: 모든 릴레이를 동시에 활성화
- **모두 닫기**: 모든 릴레이를 동시에 비활성화

### 상태 표시

- 실시간 릴레이 상태 표시 (열림/닫힘)
- 색상으로 상태 구분 (녹색: 열림, 빨간색: 닫힘)

## 보안 주의사항

- 이 시스템은 로컬 네트워크에서만 사용하세요
- 외부 네트워크에 노출하지 마세요
- 필요시 인증 시스템을 추가하세요

## 문제 해결

### GPIO 권한 오류

```bash
sudo usermod -a -G gpio pi
sudo reboot
```

### 포트 사용 중 오류

다른 포트로 변경하려면 `relay_web_server.py`에서 포트 번호를 수정하세요:

```python
app.run(host='0.0.0.0', port=5001, debug=False)
```

### 릴레이가 작동하지 않는 경우

1. 하드웨어 연결 확인
2. GPIO 핀 번호 확인
3. 릴레이 모듈 전원 공급 확인

## 라이선스

MIT License
